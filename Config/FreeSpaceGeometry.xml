

    <!-- pinch coils -->

    <tag name="magnet_tag" name="upstream_pinch_coil_tag">
      <cylinder_tube_space
	 name="upstream_pinch_coil_space"
	 z1="-.0038"
	 z2=".0038"
	 longitudinal_mesh_count="10"
	 longitudinal_mesh_power="1."
	 r1="0.0074"
	 r2="0.0094"
	 radial_mesh_count="30"
	 radial_mesh_power="1."
	 axial_mesh_count="128"
	 />
      </tag>


    <tag name="magnet_tag" name="center_pinch_coil_tag">
      <cylinder_tube_space
	 name="center_pinch_coil_space"
	 z1="-.0038"
	 z2=".0038"
	 longitudinal_mesh_count="10"
	 longitudinal_mesh_power="1."
	 r1="0.0074"
	 r2="0.0094"
	 radial_mesh_count="30"
	 radial_mesh_power="1."
	 axial_mesh_count="128"
	 />
      </tag>


    <tag name="magnet_tag" name="downstream_pinch_coil_tag">
      <cylinder_tube_space
	 name="downstream_pinch_coil_space"
	 z1="-.0038"
	 z2=".0038"
	 longitudinal_mesh_count="10"
	 longitudinal_mesh_power="1."
	 r1="0.0074"
	 r2="0.0094"
	 radial_mesh_count="30"
	 radial_mesh_power="1."
	 axial_mesh_count="128"
	 />
      </tag>

    <!-- bathtub coils -->

    <tag name="magnet_tag" name="upstream_bathtub_coil_tag">
      <cylinder_tube_space
	 name="upstream_bathtub_coil_space"
	 z1="-.0038"
	 z2=".0038"
	 longitudinal_mesh_count="10"
	 longitudinal_mesh_power="1."
	 r1="0.01"
	 r2="0.015"
	 radial_mesh_count="30"
	 radial_mesh_power="1."
	 axial_mesh_count="128"
	 />
      </tag>


    <tag name="magnet_tag" name="downstream_bathtub_coil_tag">
      <cylinder_tube_space
	 name="downstream_bathtub_coil_space"
	 z1="-.0038"
	 z2=".0038"
	 longitudinal_mesh_count="10"
	 longitudinal_mesh_power="1."
	 r1="0.01"
	 r2="0.015"
	 radial_mesh_count="30"
	 radial_mesh_power="1."
	 axial_mesh_count="128"
	 />
      </tag>

<!--
 <flattened_poly_loop_surface name="patch_surface" z="0." flattened_mesh_count="10" flattened_mesh_power="1.">
        <poly_loop>
            <start_point x="-1.875e-3" y="1.458e-3"/>
            <next_line x="1.875e-3" y="1.458e-3" line_mesh_count="10" line_mesh_power="1."/>
            <next_line x="1.875e-3" y="-1.458e-3" line_mesh_count="10" line_mesh_power="1."/>
            <next_line x="-1.875e-3" y="-1.458e-3" line_mesh_count="10" line_mesh_power="1."/>
            <last_line line_mesh_count="10" line_mesh_power="1."/>
        </poly_loop>
    </flattened_poly_loop_surface>
-->

<!--
    <space name="endcap_assembly">
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.0516}"/>
	<transformation displacement="{0.006} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.0516}"/>
	<transformation displacement="{0.006} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 45."/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.0516}"/>
	<transformation displacement="{0.006} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 90."/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.0516}"/>
	<transformation displacement="{0.006} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 135."/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.0516}"/>
	<transformation displacement="{0.006} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 180."/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.0516}"/>
	<transformation displacement="{0.006} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 225."/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.0516}"/>
	<transformation displacement="{0.006} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 270."/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.0516}"/>
	<transformation displacement="{0.006} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 315."/>
    </surface>

    </space>
-->

<!--
    <space name="patch_assembly">

    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 0."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 12."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 24."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 36."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 48."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 60."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 72."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 84."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 96."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 108."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 120."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 132."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 144."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 156."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 168."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 180."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 192."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 204."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 216."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 228."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 240."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 252."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 264."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 276."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 288."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 300."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 312."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 324."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 336."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    <surface name="patch" node="patch_surface">
    	<transformation rotation_euler="90. 0. 0."/>
    	<transformation rotation_euler="90. 90. 0."/>
	<transformation displacement="{0.051} {0.} {0.}"/>
    	<transformation rotation_euler="0. 0. 348."/>
	<transformation displacement="{[PatchOffset]} {0.} {0.}"/>
    </surface>
    </space>
-->

    <space name="project8_assembly">

<!--    <space name="endcap_array" tree="endcap_assembly">
	<transformation displacement="{0.} {0.} {0.}"/>
    </space> -->

<!--
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {0.}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {0.0102}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {0.0204}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {0.0306}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {0.0408}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {0.0516}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {-0.0102}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {-0.0204}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {-0.0306}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {-0.0408}"/>
    </space> 
    <space name="patch_array" tree="patch_assembly">
	<transformation displacement="{0.} {0.} {-0.0516}"/>
    </space> -->




<!--
      <space name="upstream_pinch_coil" node="upstream_pinch_coil_space">
    	<transformation rotation_euler="0. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.0221742}"/>
      </space>
      <space name="center_pinch_coil" node="center_pinch_coil_space">
      	  <transformation rotation_euler="0. 0. 0."/>
	  <transformation displacement="{0.} {0.} {0.0}"/>
      </space>
      <space name="downstream_pinch_coil" node="downstream_pinch_coil_space">
    	<transformation rotation_euler="0. 0. 0."/>
	<transformation displacement="{0.} {0.} {-0.0221742}"/>
	</space> -->
      <space name="upstream_bathtub_coil" node="upstream_bathtub_coil_space">
    	<transformation rotation_euler="0. 0. 0."/>
	<transformation displacement="{0.} {0.} {0.03}"/>
	</space>
      <space name="downstream_bathtub_coil" node="downstream_bathtub_coil_space">
    	<transformation rotation_euler="0. 0. 0."/> 
	<transformation displacement="{0.} {0.} {-0.03}"/>
	</space>


    </space>

    <cylinder_space name="world_space" z1="-50" z2="50" r="20"/>
    <space name="world" node="world_space">
        <space name="project8" tree="project8_assembly">
            <transformation rotation_axis_angle="[alignment] 90. 90."/>
        </space>
    </space>




    <appearance name="app_magnet" color="0 255 96 96" arc="72" surfaces="world/project8/upstream_bathtub_coil/#"/> 
<!--    <appearance name="app_magnet" color="0 255 96 96" arc="72" surfaces="world/project8/upstream_pinch_coil/#"/> 
    <appearance name="app_magnet" color="0 255 96 96" arc="72" surfaces="world/project8/center_pinch_coil/#"/> 
    <appearance name="app_magnet" color="0 255 96 96" arc="72" surfaces="world/project8/downstream_pinch_coil/#"/>  -->
    <appearance name="app_magnet" color="0 255 96 96" arc="72" surfaces="world/project8/downstream_bathtub_coil/#"/> 
<!--    <appearance name="app_patch" color="10 255 96 96" arc="72" surfaces="patch_assembly/patch"/> -->




